spring:
  application:
    name: gd-board-scraper-service
  config:
    import:
      - optional:file:./${spring.application.name}/.env[.properties]
      - optional:file:./.env[.properties]
  data:
    mongodb:
      host: ${MONGODB_HOST:localhost}
      port: ${MONGODB_PORT:27017}
      database: ${MONGODB_DB}
      username: ${MONGODB_USER}
      password: ${MONGODB_PASSWORD}
      authentication-database: ${MONGODB_AUTH:admin}
#    servlet:
#      multipart:
#        enabled: true
#        max-file: 10MB
#        request-size: 10MB
server:
  port: ${SERVER_PORT:8080}

logging:
  level:
    root: info


selenium:
  grid:
    url: http://${SELENIUM_GRID_HOST:localhost}:${SELENIUM_GRID_PORT:4444}
  pool:
    size: 5

scraper:
  linkedin:
    board-name: "linkedin"
    base-url: "https://www.linkedin.com/jobs/search"
    search-properties:
      keyword-property: "keywords"
      location-property: "location"
      experience-level-property: "f_E"
      date-posted-property: "f_TPR"
    job-listings-container-element-locator:
      locator-type: CLASS_NAME
      locator-string: "jobs-search__results-list"
    job-item-element-locator:
      locator-type: TAG_NAME
      locator-string: "li"
    job-details-element-locator:
      locator-type: CLASS_NAME
      locator-string: "details-pane__content--show"
    job-selectors:
      - field: JOB_ID
        selector:
          element-locator:
            locator-type: CLASS_NAME
            locator-string: "base-card"
          attribute-selector:
            attribute-type: ATTRIBUTE
            attribute-name: "data-entity-urn"
          regex-pattern: 'urn:li:jobPosting:(\\d+)'
      - field: TITLE
        selector:
          element-locator:
            locator-type: CLASS_NAME
            locator-string: "base-search-card__title"
      - field: COMPANY
        selector:
          element-locator:
            locator-type: CLASS_NAME
            locator-string: "base-search-card__subtitle"
      - field: LOCATION
        selector:
          element-locator:
            locator-type: CLASS_NAME
            locator-string: "job-search-card__location"
      - field: DATE_POSTED
        selector:
          element-locator:
            locator-type: CLASS_NAME
            locator-string: "job-search-card__listdate"
          attribute-selector:
            attribute-type: ATTRIBUTE
            attribute-name: "datetime"
      - field: DESCRIPTION
        selector:
          element-locator:
            locator-type: XPATH
            locator-string: "/html/body/div[1]/div/section/div[2]/div/section[1]/div/div/section/div"
          attribute-selector:
            attribute-type: INNER_HTML
      - field: JOB_TYPE
        selector:
          element-locator:
            locator-type: XPATH
            locator-string: "/html/body/div[1]/div/section/div[2]/div/section[1]/div/ul/li[2]/span"
      - field: EXPERIENCE_LEVEL
        selector:
          element-locator:
            locator-type: XPATH
            locator-string: "/html/body/div[1]/div/section/div[2]/div/section[1]/div/ul/li[1]/span"
      - field: APPLY_URL
        selector:
          element-locator:
            locator-type: ID
            locator-string: "applyUrl"
          regex-pattern: '<!--"(https?://[^"]+)"-->'
      - field: URL
        selector:
          element-locator:
            locator-type: CLASS_NAME
            locator-string: "base-card__full-link"
          attribute-selector:
            attribute-type: HREF
          regex-pattern: '^(.*?)(\?.*)?$'
    page-load-wait-time: 10
    element-wait-time: 5
    max-pages: 5
    request-delay-ms: 5000

#scraper:
#  linkedin:
#    selectors:
#      job-urn-selector: base-card
#      title-selector: base-search-card__title
#      company-selector: base-search-card__subtitle
#      location-selector: job-search-card__location
##      salary-selector: .jobs-unified-top-card__salary-details
##      description-selector: .jobs-description-content__text
#      date-posted-selector: job-search-card__listdate
#    attributes:
#      job-urn-attribute: data-entity-urn
#      date-posted-attribute: data-entity-urn